<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <title>PETER_GHOST_CINEMA_SUPREME</title>
  <style>
    body { margin: 0; background: #000; color: #0f0; font-family: monospace; overflow: hidden; }
    canvas { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: -1; pointer-events: none; }
    
    /* LOGIN/REGISTO */
    .box { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0, 10, 0, 0.95); border: 2px solid #0f0; padding: 30px; width: 320px; text-align: center; box-shadow: 0 0 25px #0f0; z-index: 1000; display: none; }
    input { width: 100%; padding: 10px; margin: 10px 0; background: #000; border: 1px solid #0f0; color: #0f0; outline: none; box-sizing: border-box; }
    button { width: 100%; padding: 10px; background: #0f0; color: #000; border: none; font-weight: bold; cursor: pointer; }

    /* CINEMA */
    #cinema { display: none; position: relative; z-index: 10; padding: 20px; height: 100vh; overflow-y: auto; }
    .top-bar { display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.8); padding: 10px; border-bottom: 1px solid #0f0; position: sticky; top: 0; z-index: 20; }
    .video-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; margin-top: 20px; }
    .v-card { border: 1px solid #0f0; padding: 10px; background: rgba(0,20,0,0.8); }

    /* PAIN√âIS ADMIN (I e L) */
    .admin-panel { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 450px; background: rgba(0, 20, 0, 0.98); border: 2px solid #0f0; box-shadow: 0 0 30px #0f0; z-index: 9000; padding: 20px; display: none; color: #0f0; }
    .log-item { display: flex; justify-content: space-between; padding: 8px; border-bottom: 1px solid #040; font-size: 13px; }
    
    /* PLAYER */
    #video-focus { display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 5000; background: #000; justify-content: center; align-items: center; }
    #player-wrap { position: relative; width: 90%; height: 85%; border: 3px solid #0f0; }
    #mouse-blocker { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 5010; cursor: none; }
  </style>
</head>
<body>

<canvas id="m"></canvas>

<div class="box" id="login-screen" style="display:block">
  <h2>SYSTEM_LOGIN</h2>
  <input type="text" id="u" placeholder="USER_ID">
  <input type="password" id="p" placeholder="ACCESS_KEY">
  <button onclick="check()">ENTRAR</button>
</div>

<div id="cinema">
  <div class="top-bar">
    <h2>CINEMA</h2>
    <div style="display:flex; gap:10px;">
      <input type="text" id="s-in" placeholder="üîç Pesquisar..." oninput="loadV()" style="width:150px; margin:0;">
      <button id="adm-btn" style="display:none; width:auto;" onclick="addV()">‚öôÔ∏è ADD</button>
    </div>
  </div>
  <div id="video-area" class="video-grid"></div>
</div>

<div id="log-panel" class="admin-panel">
  <h2 style="color:#0f0;">USER_DATABASE_LOGS (L)</h2>
  <div id="log-list" style="max-height:300px; overflow-y:auto; margin-bottom:20px;"></div>
  <button onclick="document.getElementById('log-panel').style.display='none'">FECHAR [ESC]</button>
</div>

<div id="video-focus">
  <span onclick="closeF()" style="position:absolute; top:20px; right:30px; color:#0f0; font-size:40px; cursor:pointer; z-index: 6000;">[X]</span>
  <div id="player-wrap"><div id="mouse-blocker"></div><div id="player"></div></div>
</div>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
  // Matrix Effect
  const c = document.getElementById('m'), q = c.getContext('2d');
  function res() { c.width = window.innerWidth; c.height = window.innerHeight; }
  window.onresize = res; res();
  const s = Array(256).fill(0);
  setInterval(() => {
    q.fillStyle = "rgba(0,0,0,0.1)"; q.fillRect(0,0,c.width,c.height);
    q.fillStyle = "#0f0";
    s.map((y, i) => { q.fillText(Math.floor(Math.random()*2), i * 10, y); s[i] = y > 758 + Math.random()*1e4 ? 0 : y + 10; });
  }, 35);

  let users = JSON.parse(localStorage.getItem('ghost_db') || '{"PETEERque":{"p":"112233","b":false}}');
  let currentUser = "";
  let yt;

  function check() {
    const u = document.getElementById('u').value, p = document.getElementById('p').value;
    if(users[u] && users[u].p === p) {
      currentUser = u;
      document.getElementById('login-screen').style.display = 'none';
      document.getElementById('cinema').style.display = 'block';
      if(u === "PETEERque") document.getElementById('adm-btn').style.display = 'block';
      loadV();
    } else { alert("NEGADO!"); }
  }

  function addV() {
    let n = prompt("Nome:"), u = prompt("URL:");
    if(n && u) {
      let id = u.includes("v=") ? u.split("v=")[1].split("&")[0] : u.split("be/")[1]?.split("?")[0];
      let v = JSON.parse(localStorage.getItem('cinema_vids') || "[]");
      v.push({id:id, t:n}); localStorage.setItem('cinema_vids', JSON.stringify(v)); loadV();
    }
  }

  function loadV() {
    const v = JSON.parse(localStorage.getItem('cinema_vids') || "[]");
    document.getElementById('video-area').innerHTML = v.map(vid => `
      <div class="v-card">
        <img src="https://img.youtube.com/vi/${vid.id}/mqdefault.jpg" onclick="openF('${vid.id}')" style="width:100%; cursor:pointer;">
        <div style="color:#0f0; margin-top:10px;">${vid.t}</div>
      </div>`).join('');
  }

  function showLogs() {
    const list = document.getElementById('log-list');
    list.innerHTML = Object.keys(users).map(u => `
      <div class="log-item">
        <span>USER: <b>${u}</b></span>
        <span>PASS: <b style="color:#fff">${users[u].p}</b></span>
      </div>
    `).join('');
    document.getElementById('log-panel').style.display = 'block';
  }

  function openF(id, t=0) {
    document.getElementById('video-focus').style.display = 'flex';
    if(yt) yt.destroy();
    yt = new YT.Player('player', { videoId: id, playerVars: { autoplay: 1, controls: 0, start: t } });
  }

  function closeF() { document.getElementById('video-focus').style.display = 'none'; if(yt) yt.stopVideo(); }

  window.onkeydown = (e) => {
    const k = e.key.toLowerCase();
    if(k === 'l' && currentUser === "PETEERque") showLogs();
    if(e.key === 'Escape') { closeF(); document.querySelectorAll('.admin-panel').forEach(p => p.style.display='none'); }
    if(!yt || typeof yt.getPlayerState !== 'function') return;
    if(k === 'e') yt.getPlayerState() === 1 ? yt.pauseVideo() : yt.playVideo();
  }
</script>
</body>
</html>
